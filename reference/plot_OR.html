<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Plot Odds Ratio — plot_OR • RegrCoeffsExplorer</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Plot Odds Ratio — plot_OR"><meta name="description" content="The function accepts input in the form of a generalized linear model (GLM)
or a glmnet object, specifically those employing binomial families, and
proceeds to generate a suite of visualizations illustrating alterations in
Odds Ratios for given predictor variable corresponding to changes between
minimum, first quartile (Q1), median (Q2), third quartile (Q3), and maximum
values observed in empirical data. These plots offer a graphical depiction
of the influence exerted by individual predictors on the odds of the outcome,
facilitating a clear interpretation of their respective significance. Such
a tool aids in comprehending the interplay between predictors and outcomes
within the logistic regression framework, particularly within the context
of empirical data distributions."><meta property="og:description" content="The function accepts input in the form of a generalized linear model (GLM)
or a glmnet object, specifically those employing binomial families, and
proceeds to generate a suite of visualizations illustrating alterations in
Odds Ratios for given predictor variable corresponding to changes between
minimum, first quartile (Q1), median (Q2), third quartile (Q3), and maximum
values observed in empirical data. These plots offer a graphical depiction
of the influence exerted by individual predictors on the odds of the outcome,
facilitating a clear interpretation of their respective significance. Such
a tool aids in comprehending the interplay between predictors and outcomes
within the logistic regression framework, particularly within the context
of empirical data distributions."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">RegrCoeffsExplorer</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.1.0000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/BetaVisualizer.html">BetaVisualizer</a></li>
    <li><a class="dropdown-item" href="../articles/OddsRatioVisualizer.html">OddsRatioVisualizer</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Plot Odds Ratio</h1>

      <div class="d-none name"><code>plot_OR.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The function accepts input in the form of a generalized linear model (GLM)
or a glmnet object, specifically those employing binomial families, and
proceeds to generate a suite of visualizations illustrating alterations in
Odds Ratios for given predictor variable corresponding to changes between
minimum, first quartile (Q1), median (Q2), third quartile (Q3), and maximum
values observed in empirical data. These plots offer a graphical depiction
of the influence exerted by individual predictors on the odds of the outcome,
facilitating a clear interpretation of their respective significance. Such
a tool aids in comprehending the interplay between predictors and outcomes
within the logistic regression framework, particularly within the context
of empirical data distributions.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">plot_OR</span><span class="op">(</span></span>
<span>  <span class="va">func</span>,</span>
<span>  <span class="va">data</span>,</span>
<span>  <span class="va">var_name</span>,</span>
<span>  color_filling <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grDevices/gray.colors.html" class="external-link">grey.colors</a></span><span class="op">(</span><span class="fl">4</span>, start <span class="op">=</span> <span class="fl">0.1</span>, end <span class="op">=</span> <span class="fl">0.9</span><span class="op">)</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-func">func<a class="anchor" aria-label="anchor" href="#arg-func"></a></dt>
<dd><p>A fitted model object with binomial family, expected to be one
of the following classes:</p><ul><li><p><code>glm lm</code>             : Generalized Linear Models.</p></li>
<li><p><code>lognet glmnet</code>      : Regularized Logistic Models.</p></li>
</ul></dd>


<dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>Input data frame that was used to fit the input function
(<code>data.frame</code> object).</p></dd>


<dt id="arg-var-name">var_name<a class="anchor" aria-label="anchor" href="#arg-var-name"></a></dt>
<dd><p>Name of a variable to plot graphs for (<code>string</code> object).</p></dd>


<dt id="arg-color-filling">color_filling<a class="anchor" aria-label="anchor" href="#arg-color-filling"></a></dt>
<dd><p>Vector with color numbers to plot in bar plot
(<code>vector</code> object).
Default is <code>grey.colors(4, start=0.1, end=0.9)</code>.</p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p><code>TRUE</code> to print additional information such as Warnings,
<code>FALSE</code> otherwise (<code>bool</code> object). Default is <code>FALSE</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A list with the following components:</p><ul><li><p><code>$BarPlot</code>    : A <code>ggplot</code> object that visualizes dependency of a change
in Variable values on function's Odds Ratio values.</p></li>
<li><p><code>$BoxPlot</code>    : A <code>ggplot</code> object that visualizes distribution of data
points for a given variable.</p></li>
<li><p><code>$SidebySide</code> : A <code>ggarrange</code> object containing both visualizations
side-by-side.</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co">### Prepare Sample Binomial Data</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">42</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">obs_num</span> <span class="op">=</span> <span class="fl">100</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">x1</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">obs_num</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">x2</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">obs_num</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">x3</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">obs_num</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">prob</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Logistic.html" class="external-link">plogis</a></span><span class="op">(</span><span class="fl">1</span> <span class="op">+</span> <span class="fl">0.3</span> <span class="op">*</span> <span class="va">x1</span> <span class="op">+</span> <span class="fl">0.2</span> <span class="op">*</span> <span class="va">x2</span> <span class="op">+</span> <span class="fl">0.1</span> <span class="op">*</span> <span class="va">x3</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">y</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Binomial.html" class="external-link">rbinom</a></span><span class="op">(</span><span class="va">obs_num</span>, <span class="fl">1</span>, <span class="va">prob</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">data</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="va">x1</span>, <span class="va">x2</span>, <span class="va">x3</span>, <span class="va">y</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">### GLM Object Exmaple</span></span></span>
<span class="r-in"><span><span class="co"># Get GLM model</span></span></span>
<span class="r-in"><span><span class="va">glm_object</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/glm.html" class="external-link">glm</a></span><span class="op">(</span><span class="va">y</span> <span class="op">~</span> <span class="va">x1</span> <span class="op">+</span> <span class="va">x2</span> <span class="op">+</span> <span class="va">x3</span>,</span></span>
<span class="r-in"><span>                 family<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/stats/family.html" class="external-link">binomial</a></span><span class="op">(</span>link<span class="op">=</span><span class="st">"logit"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                 data<span class="op">=</span><span class="va">data</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">glm_object</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Call:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> glm(formula = y ~ x1 + x2 + x3, family = binomial(link = "logit"), </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     data = data)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Coefficients:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             Estimate Std. Error z value Pr(&gt;|z|)    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> (Intercept)   0.9302     0.2395   3.884 0.000103 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> x1            0.3958     0.2324   1.703 0.088595 .  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> x2            0.5801     0.2723   2.130 0.033143 *  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> x3            0.3121     0.2421   1.289 0.197346    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ---</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> (Dispersion parameter for binomial family taken to be 1)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Null deviance: 123.82  on 99  degrees of freedom</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Residual deviance: 113.97  on 96  degrees of freedom</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> AIC: 121.97</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Number of Fisher Scoring iterations: 4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Plot Odds Ratio graphs</span></span></span>
<span class="r-in"><span><span class="fu">plot_OR</span><span class="op">(</span><span class="va">glm_object</span>, <span class="va">data</span>, var_name<span class="op">=</span><span class="st">"x2"</span><span class="op">)</span><span class="op">$</span><span class="st">"SidebySide"</span></span></span>
<span class="r-plt img"><img src="plot_OR-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">### GLMNET Object Example</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va"><a href="https://glmnet.stanford.edu" class="external-link">glmnet</a></span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Loading required package: glmnet</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Loading required package: Matrix</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Loaded glmnet 4.1-8</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Get Lasso model</span></span></span>
<span class="r-in"><span><span class="va">y_lasso</span> <span class="op">=</span> <span class="va">data</span><span class="op">$</span><span class="va">y</span></span></span>
<span class="r-in"><span><span class="va">x_lasso</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/model.matrix.html" class="external-link">model.matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/formula.html" class="external-link">as.formula</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"~"</span>,</span></span>
<span class="r-in"><span>                                        <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">data</span>,</span></span>
<span class="r-in"><span>                                                              select<span class="op">=</span><span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                              collapse <span class="op">=</span> <span class="st">"+"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                        sep <span class="op">=</span> <span class="st">""</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                       data<span class="op">=</span><span class="va">data</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">x_lasso</span> <span class="op">=</span> <span class="va">x_lasso</span><span class="op">[</span>,<span class="op">-</span><span class="fl">1</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="va">ndim_lasso</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">x_lasso</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Select the 1se lambda from cross validation</span></span></span>
<span class="r-in"><span><span class="va">cv_model_lasso</span> <span class="op">=</span> <span class="fu"><a href="https://glmnet.stanford.edu/reference/cv.glmnet.html" class="external-link">cv.glmnet</a></span><span class="op">(</span><span class="va">x_lasso</span>, <span class="va">y_lasso</span>, family<span class="op">=</span><span class="st">"binomial"</span>, alpha<span class="op">=</span><span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">lambda_lasso</span> <span class="op">=</span> <span class="va">cv_model_lasso</span><span class="op">$</span><span class="va">lambda.1se</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">cv_model_lasso</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="plot_OR-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Get a model with the specified lambda</span></span></span>
<span class="r-in"><span><span class="va">model_lasso</span> <span class="op">=</span> <span class="fu"><a href="https://glmnet.stanford.edu/reference/glmnet.html" class="external-link">glmnet</a></span><span class="op">(</span><span class="va">x_lasso</span>, <span class="va">y_lasso</span>, family<span class="op">=</span><span class="st">"binomial"</span>,</span></span>
<span class="r-in"><span>                     alpha<span class="op">=</span><span class="fl">0.5</span>, lambda<span class="op">=</span><span class="va">lambda_lasso</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">model_lasso</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            Length Class     Mode     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> a0         1      -none-    numeric  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> beta       3      dgCMatrix S4       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> df         1      -none-    numeric  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> dim        2      -none-    numeric  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> lambda     1      -none-    numeric  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> dev.ratio  1      -none-    numeric  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> nulldev    1      -none-    numeric  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> npasses    1      -none-    numeric  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> jerr       1      -none-    numeric  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> offset     1      -none-    logical  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> classnames 2      -none-    character</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> call       6      -none-    call     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> nobs       1      -none-    numeric  </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Plot Odds Ratio graphs</span></span></span>
<span class="r-in"><span><span class="fu">plot_OR</span><span class="op">(</span><span class="va">model_lasso</span>, <span class="va">data</span>, var_name<span class="op">=</span><span class="st">"x2"</span><span class="op">)</span><span class="op">$</span><span class="st">"SidebySide"</span></span></span>
<span class="r-plt img"><img src="plot_OR-3.png" alt="" width="700" height="433"></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Vadim Tyuryaev, Aleksandr Tsybakin, Jane Heffernan, Hanna Jankowski, Kevin McGregor.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

