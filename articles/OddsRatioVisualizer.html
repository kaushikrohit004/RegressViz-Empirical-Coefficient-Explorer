<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>OddsRatioVisualizer • RegrCoeffsExplorer</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="OddsRatioVisualizer">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">RegrCoeffsExplorer</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.1.0000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/BetaVisualizer.html">BetaVisualizer</a></li>
    <li><a class="dropdown-item" href="../articles/OddsRatioVisualizer.html">OddsRatioVisualizer</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>OddsRatioVisualizer</h1>
                        <h4 data-toc-skip class="author">Aleksandr
Tsybakin<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content='&lt;p&gt;York University,Mathematics and Statistic, &lt;a href="mailto:tsybakin@yorku.ca" class="email"&gt;tsybakin@yorku.ca&lt;/a&gt;&lt;/p&gt;'><sup>1</sup></a>
</h4>
                        <h4 data-toc-skip class="author">Vadim
Tyuryaev<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content='&lt;p&gt;York University,Mathematics and Statistic, &lt;a href="mailto:vadimtyu@yorku.ca" class="email"&gt;vadimtyu@yorku.ca&lt;/a&gt;&lt;/p&gt;'><sup>2</sup></a>
</h4>
                        <h4 data-toc-skip class="author">Jane
Heffernan<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content='&lt;p&gt;York University,Mathematics and Statistic, &lt;a href="mailto:jmheffer@yorku.ca" class="email"&gt;jmheffer@yorku.ca&lt;/a&gt;&lt;/p&gt;'><sup>3</sup></a>
</h4>
                        <h4 data-toc-skip class="author">Hanna
Jankowski<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content='&lt;p&gt;York University,Mathematics and Statistic, &lt;a href="mailto:hkj@yorku.ca" class="email"&gt;hkj@yorku.ca&lt;/a&gt;&lt;/p&gt;'><sup>4</sup></a>
</h4>
                        <h4 data-toc-skip class="author">Kevin
McGregor<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content='&lt;p&gt;York University,Mathematics and Statistic, &lt;a href="mailto:kevinmcg@yorku.ca" class="email"&gt;kevinmcg@yorku.ca&lt;/a&gt;&lt;/p&gt;'><sup>5</sup></a>
</h4>
            
      

      <div class="d-none name"><code>OddsRatioVisualizer.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="libraries">LIBRARIES<a class="anchor" aria-label="anchor" href="#libraries"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://vadimtyuryaev.github.io/RegrCoeffsExplorer/">RegrCoeffsExplorer</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/julianfaraway/faraway" class="external-link">faraway</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rpkgs.datanovia.com/ggpubr/" class="external-link">ggpubr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">gridExtra</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rlang.r-lib.org" class="external-link">rlang</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="examples">EXAMPLES<a class="anchor" aria-label="anchor" href="#examples"></a>
</h2>
<div class="section level3">
<h3 id="data">1. Data<a class="anchor" aria-label="anchor" href="#data"></a>
</h3>
<p>We will use the <em>Career choice of high school students</em>
(<code>hsb</code>) dataset from the <em>faraway</em> package to
demonstrate how <strong><code>plot_OR</code></strong> function works and
how it can be customized. This dataset contains 200 observations with 11
factors related to students’ physical characteristics as well as their
study performance. More details on this dataset can be found <a href="https://cran.r-project.org/web/packages/faraway/faraway.pdf" class="external-link">in
the official documentation</a>.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get program choice of high school students data</span></span>
<span><span class="va">hsb_data</span> <span class="op">=</span> <span class="fu">faraway</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/faraway/man/hsb.html" class="external-link">hsb</a></span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">hsb_data</span><span class="op">)</span></span>
<span><span class="co">#&gt;    id gender  race    ses schtyp     prog read write math science socst</span></span>
<span><span class="co">#&gt; 1  70   male white    low public  general   57    52   41      47    57</span></span>
<span><span class="co">#&gt; 2 121 female white middle public vocation   68    59   53      63    61</span></span>
<span><span class="co">#&gt; 3  86   male white   high public  general   44    33   54      58    31</span></span>
<span><span class="co">#&gt; 4 141   male white   high public vocation   63    44   47      53    56</span></span>
<span><span class="co">#&gt; 5 172   male white middle public academic   47    52   57      53    61</span></span>
<span><span class="co">#&gt; 6 113   male white middle public academic   44    52   51      63    61</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="function">2. Function<a class="anchor" aria-label="anchor" href="#function"></a>
</h3>
<p>Let’s fit a GLM model with binomial family and logistic link function
to explore which factors affect the Odds of selecting an
<code>academic</code> program versus non-academic ones
(<code>general</code> or <code>vocation</code>).</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Remove id column</span></span>
<span><span class="va">hsb_data</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">hsb_data</span>, select<span class="op">=</span><span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">id</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Fit a glm model with binary family on all variables</span></span>
<span><span class="va">glm_object</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/stats/glm.html" class="external-link">glm</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/AsIs.html" class="external-link">I</a></span><span class="op">(</span><span class="va">prog</span> <span class="op">==</span> <span class="st">"academic"</span><span class="op">)</span> <span class="op">~</span> <span class="va">gender</span> <span class="op">+</span> <span class="va">math</span> <span class="op">+</span> <span class="va">read</span> <span class="op">+</span> <span class="va">write</span> <span class="op">+</span> <span class="va">science</span> </span>
<span>               <span class="op">+</span> <span class="va">socst</span> <span class="op">+</span> <span class="va">schtyp</span> <span class="op">+</span> <span class="va">ses</span> <span class="op">+</span> <span class="va">race</span>,</span>
<span>              family<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/stats/family.html" class="external-link">binomial</a></span><span class="op">(</span>link<span class="op">=</span><span class="st">"logit"</span><span class="op">)</span>, </span>
<span>              data<span class="op">=</span><span class="va">hsb_data</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">glm_object</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; glm(formula = I(prog == "academic") ~ gender + math + read + </span></span>
<span><span class="co">#&gt;     write + science + socst + schtyp + ses + race, family = binomial(link = "logit"), </span></span>
<span><span class="co">#&gt;     data = hsb_data)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Coefficients:</span></span>
<span><span class="co">#&gt;              Estimate Std. Error z value Pr(&gt;|z|)    </span></span>
<span><span class="co">#&gt; (Intercept)  -6.17122    1.59304  -3.874 0.000107 ***</span></span>
<span><span class="co">#&gt; gendermale    0.18406    0.39450   0.467 0.640817    </span></span>
<span><span class="co">#&gt; math          0.10861    0.03148   3.450 0.000560 ***</span></span>
<span><span class="co">#&gt; read          0.03928    0.02753   1.427 0.153550    </span></span>
<span><span class="co">#&gt; write         0.03687    0.02915   1.265 0.205914    </span></span>
<span><span class="co">#&gt; science      -0.07976    0.02876  -2.773 0.005549 ** </span></span>
<span><span class="co">#&gt; socst         0.04639    0.02383   1.947 0.051568 .  </span></span>
<span><span class="co">#&gt; schtyppublic -1.16549    0.50968  -2.287 0.022214 *  </span></span>
<span><span class="co">#&gt; seslow       -0.65253    0.53904  -1.211 0.226070    </span></span>
<span><span class="co">#&gt; sesmiddle    -0.90990    0.43239  -2.104 0.035350 *  </span></span>
<span><span class="co">#&gt; raceasian    -0.75657    0.98584  -0.767 0.442820    </span></span>
<span><span class="co">#&gt; racehispanic  0.36016    0.72792   0.495 0.620751    </span></span>
<span><span class="co">#&gt; racewhite    -0.27162    0.63372  -0.429 0.668206    </span></span>
<span><span class="co">#&gt; ---</span></span>
<span><span class="co">#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; (Dispersion parameter for binomial family taken to be 1)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     Null deviance: 276.76  on 199  degrees of freedom</span></span>
<span><span class="co">#&gt; Residual deviance: 197.85  on 187  degrees of freedom</span></span>
<span><span class="co">#&gt; AIC: 223.85</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Number of Fisher Scoring iterations: 5</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="visualization">3. Visualization<a class="anchor" aria-label="anchor" href="#visualization"></a>
</h3>
<p>Below are several examples how <strong>plot_OR</strong> function can
be utilized.</p>
<div class="section level5">
<h5 id="default-plots">3.1 Default Plots<a class="anchor" aria-label="anchor" href="#default-plots"></a>
</h5>
<p>The default visualization produced by the <strong>plot_OR</strong>
function includes two plots placed side-by-side:</p>
<ol style="list-style-type: decimal">
<li>A bar plot illustrating the dependency of the Realized Size Effect
on the Odds Ratio, displayed at the top of the output figure.</li>
<li>A box plot representing the distribution of data points for a given
variable, displayed at the bottom of the output figure.</li>
</ol>
<p>In order to get these visuals the following should be passed to the
<strong>plot_OR</strong> function:</p>
<ol style="list-style-type: decimal">
<li>Fitted <strong>GLM</strong> or <strong>GLMNET</strong> object with a
<strong>binary</strong> family.</li>
<li>Data that was used to fit the
<strong>GLM</strong>/<strong>GLMNET</strong> object.</li>
<li>Variable name that the plots should be built for.</li>
</ol>
<p>Example of the default side-by-side visualization for the
<em>math</em> variable is shown below.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Default side by side example for one variable</span></span>
<span><span class="fu"><a href="../reference/plot_OR.html">plot_OR</a></span><span class="op">(</span><span class="va">glm_object</span>, <span class="va">hsb_data</span>, var_name<span class="op">=</span><span class="st">"math"</span><span class="op">)</span><span class="op">$</span><span class="st">"SidebySide"</span></span></code></pre></div>
<p><img src="OddsRatioVisualizer_files/figure-html/unnamed-chunk-5-1.png" width="768"></p>
<p>Also, we can get each plot separately using the dollar sign operator
as exemplified below.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Default barplot example for one variable</span></span>
<span><span class="fu"><a href="../reference/plot_OR.html">plot_OR</a></span><span class="op">(</span><span class="va">glm_object</span>, <span class="va">hsb_data</span>, var_name<span class="op">=</span><span class="st">"math"</span><span class="op">)</span><span class="op">$</span><span class="st">"BarPlot"</span></span></code></pre></div>
<p><img src="OddsRatioVisualizer_files/figure-html/unnamed-chunk-6-1.png" width="768"></p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Default boxplot example for one variable</span></span>
<span><span class="fu"><a href="../reference/plot_OR.html">plot_OR</a></span><span class="op">(</span><span class="va">glm_object</span>, <span class="va">hsb_data</span>, var_name<span class="op">=</span><span class="st">"math"</span><span class="op">)</span><span class="op">$</span><span class="st">"BoxPlot"</span></span></code></pre></div>
<p><img src="OddsRatioVisualizer_files/figure-html/unnamed-chunk-7-1.png" width="768"></p>
</div>
<div class="section level5">
<h5 id="customization">3.2 Customization<a class="anchor" aria-label="anchor" href="#customization"></a>
</h5>
<p>Now let’s take a look on how the <code>plot_OR</code> figures can be
customized. One possible customization is to change colors of bars in
Bar plot. We can specify what colors to use by passing a vector with 4
colors as a <em>color_filling</em> parameter. The default colour
settings are <em>grey.colors(4, start=0.1, end=0.9)</em>.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Customize graph through layers and color parameter</span></span>
<span><span class="va">or_plots</span> <span class="op">=</span> <span class="fu"><a href="../reference/plot_OR.html">plot_OR</a></span><span class="op">(</span><span class="va">glm_object</span>, <span class="va">hsb_data</span>, var_name<span class="op">=</span><span class="st">"math"</span>, </span>
<span>                   color_filling<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"#CC6666"</span>, <span class="st">"#9999CC"</span>,<span class="st">"#66CC99"</span>,<span class="st">"#FF6600"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Also, we can modify both Bar plot and Box plot by explicitly varying
the parameters of the correspondent layers. Below are examples of how
the layers look like.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get Barplot layers</span></span>
<span><span class="va">or_plots</span><span class="op">$</span><span class="st">"BarPlot"</span><span class="op">$</span><span class="va">layers</span></span>
<span><span class="co">#&gt; [[1]]</span></span>
<span><span class="co">#&gt; mapping: x = ~.data[["x"]], y = ~.data[["y"]], fill = ~.data[["fct"]] </span></span>
<span><span class="co">#&gt; geom_bar: just = 0.5, width = 2.1, na.rm = FALSE, orientation = NA</span></span>
<span><span class="co">#&gt; stat_identity: na.rm = FALSE</span></span>
<span><span class="co">#&gt; position_stack </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[2]]</span></span>
<span><span class="co">#&gt; mapping: x = ~.data[["x"]], y = ~.data[["y"]] </span></span>
<span><span class="co">#&gt; geom_line: na.rm = FALSE, orientation = NA</span></span>
<span><span class="co">#&gt; stat_identity: na.rm = FALSE</span></span>
<span><span class="co">#&gt; position_identity </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[3]]</span></span>
<span><span class="co">#&gt; mapping: x = ~.data[["x"]], y = ~.data[["y"]] </span></span>
<span><span class="co">#&gt; geom_point: na.rm = FALSE</span></span>
<span><span class="co">#&gt; stat_identity: na.rm = FALSE</span></span>
<span><span class="co">#&gt; position_identity</span></span></code></pre></div>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get boxplot layers</span></span>
<span><span class="va">or_plots</span><span class="op">$</span><span class="st">"BoxPlot"</span><span class="op">$</span><span class="va">layers</span></span>
<span><span class="co">#&gt; [[1]]</span></span>
<span><span class="co">#&gt; geom_boxplot: outliers = TRUE, outlier.colour = NULL, outlier.fill = NULL, outlier.shape = 19, outlier.size = 1.5, outlier.stroke = 0.5, outlier.alpha = NULL, notch = TRUE, notchwidth = 0.5, staplewidth = 0, varwidth = FALSE, na.rm = FALSE, orientation = NA</span></span>
<span><span class="co">#&gt; stat_boxplot: na.rm = FALSE, orientation = NA</span></span>
<span><span class="co">#&gt; position_dodge2 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[2]]</span></span>
<span><span class="co">#&gt; geom_point: na.rm = FALSE</span></span>
<span><span class="co">#&gt; stat_identity: na.rm = FALSE</span></span>
<span><span class="co">#&gt; position_jitter</span></span></code></pre></div>
<p>For instance, to adjust the width of the bars in a bar plot, one can
explicitly modify the value of the <code>width</code> parameter within
the <em>geom_params</em> list in the first layer of the bar plot. The
first layer corresponds to the actual bar plot (<em>geom_bar</em>), the
second layer pertains to the line passing through the tops of the bars
(<em>geom_line</em>), and the third layer relates to the scatter points
on that line (<em>geom_point</em>).</p>
<p>Similarly, to create a regular box plot (without a notch) and adjust
the size and transparency of the data points, one can set the
<code>notch</code> parameter to <code>FALSE</code> in the
<em>geom_params</em> list of the first layer and modify the size and
alpha parameters in the <code>aes_params</code> list of the second
layer. The first layer of the box plot pertains to the actual box plot
(<em>geom_boxplot</em>), while the second layer corresponds to the
scatter of data points (<em>geom_point</em>).</p>
<p>Once the customization is finished, the plots can be visualized
side-by-side using <em>ggarrange()</em> function as shown below.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Change size of bars in the barplot</span></span>
<span><span class="va">or_plots</span><span class="op">$</span><span class="st">"BarPlot"</span><span class="op">$</span><span class="va">layers</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">geom_params</span><span class="op">$</span><span class="va">width</span> <span class="op">=</span> <span class="fl">1</span></span>
<span></span>
<span><span class="co"># Change the boxplot type</span></span>
<span><span class="va">or_plots</span><span class="op">$</span><span class="st">"BoxPlot"</span><span class="op">$</span><span class="va">layers</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">geom_params</span><span class="op">$</span><span class="va">notch</span> <span class="op">=</span> <span class="cn">FALSE</span></span>
<span></span>
<span><span class="co"># Change size and transparency of points in the boxplot</span></span>
<span><span class="va">or_plots</span><span class="op">$</span><span class="st">"BoxPlot"</span><span class="op">$</span><span class="va">layers</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">aes_params</span><span class="op">$</span><span class="va">size</span> <span class="op">=</span> <span class="fl">0.5</span></span>
<span><span class="va">or_plots</span><span class="op">$</span><span class="st">"BoxPlot"</span><span class="op">$</span><span class="va">layers</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">aes_params</span><span class="op">$</span><span class="va">alpha</span> <span class="op">=</span> <span class="fl">0.1</span></span>
<span></span>
<span><span class="co"># Plot both graphs together</span></span>
<span><span class="fu"><a href="https://rpkgs.datanovia.com/ggpubr/reference/ggarrange.html" class="external-link">ggarrange</a></span><span class="op">(</span><span class="va">or_plots</span><span class="op">$</span><span class="st">"BarPlot"</span>, <span class="va">or_plots</span><span class="op">$</span><span class="st">"BoxPlot"</span>, ncol<span class="op">=</span><span class="fl">1</span>, nrow<span class="op">=</span><span class="fl">2</span>, </span>
<span>          common.legend<span class="op">=</span><span class="cn">TRUE</span>, legend<span class="op">=</span><span class="st">"bottom"</span><span class="op">)</span></span></code></pre></div>
<p><img src="OddsRatioVisualizer_files/figure-html/unnamed-chunk-11-1.png" width="768"></p>
</div>
<div class="section level5">
<h5 id="multiple-plots">3.3 Multiple Plots<a class="anchor" aria-label="anchor" href="#multiple-plots"></a>
</h5>
<p>Now we will take a look at an example on how OR plots can be
visualized for multiple variables from the dataset. We will use the same
customized style from above examples. We will define a special function
(<em>customized_plots()</em>) to customize the plotting parameters
following the example above.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">customized_plots</span> <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">or_plots</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="co"># Change size of bars in the barplot</span></span>
<span>  <span class="va">or_plots</span><span class="op">$</span><span class="st">"BarPlot"</span><span class="op">$</span><span class="va">layers</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">geom_params</span><span class="op">$</span><span class="va">width</span> <span class="op">=</span> <span class="fl">1</span></span>
<span>  </span>
<span>  <span class="co"># Change the boxplot type</span></span>
<span>  <span class="va">or_plots</span><span class="op">$</span><span class="st">"BoxPlot"</span><span class="op">$</span><span class="va">layers</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">geom_params</span><span class="op">$</span><span class="va">notch</span> <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  </span>
<span>  <span class="co"># Change size and transparency of points in the boxplot</span></span>
<span>  <span class="va">or_plots</span><span class="op">$</span><span class="st">"BoxPlot"</span><span class="op">$</span><span class="va">layers</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">aes_params</span><span class="op">$</span><span class="va">size</span> <span class="op">=</span> <span class="fl">0.5</span></span>
<span>  <span class="va">or_plots</span><span class="op">$</span><span class="st">"BoxPlot"</span><span class="op">$</span><span class="va">layers</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">aes_params</span><span class="op">$</span><span class="va">alpha</span> <span class="op">=</span> <span class="fl">0.1</span></span>
<span>  </span>
<span>  <span class="va">or_plots</span> <span class="op">=</span> <span class="fu"><a href="https://rpkgs.datanovia.com/ggpubr/reference/ggarrange.html" class="external-link">ggarrange</a></span><span class="op">(</span><span class="va">or_plots</span><span class="op">$</span><span class="st">"BarPlot"</span>, <span class="va">or_plots</span><span class="op">$</span><span class="st">"BoxPlot"</span>, ncol<span class="op">=</span><span class="fl">1</span>, nrow<span class="op">=</span><span class="fl">2</span>, </span>
<span>                       common.legend<span class="op">=</span><span class="cn">TRUE</span>, legend<span class="op">=</span><span class="st">"bottom"</span><span class="op">)</span></span>
<span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="va">or_plots</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>Example below shows how side-by-side plots can be visualized for all
numeric variables from the dataset using <em>arrangeGrob()</em> and
<em>grid.arrange()</em>. Please note: the <code>fig.height</code> and
<code>fig.width</code> parameter of the knitr chunk should be adjusted
to make the visuals dispaly properly.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Select continuous variables</span></span>
<span><span class="va">continuous_vars</span> <span class="op">=</span> <span class="va">hsb_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select_all.html" class="external-link">select_if</a></span><span class="op">(</span><span class="va">is.numeric</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create a list to store all plots</span></span>
<span><span class="va">plot_list</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Store side by side graphs for all numeric variables</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">name</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">continuous_vars</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="co"># Customize graph through layers and color parameter</span></span>
<span>  <span class="va">or_plots</span> <span class="op">=</span> <span class="fu"><a href="../reference/plot_OR.html">plot_OR</a></span><span class="op">(</span><span class="va">glm_object</span>, <span class="va">hsb_data</span>, var_name<span class="op">=</span><span class="va">name</span>, </span>
<span>                     color_filling<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"#CC6666"</span>, <span class="st">"#9999CC"</span>,<span class="st">"#66CC99"</span>,<span class="st">"#FF6600"</span><span class="op">)</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="co"># Plot both graphs together</span></span>
<span>  <span class="va">plot_list</span><span class="op">[[</span><span class="va">name</span><span class="op">]</span><span class="op">]</span> <span class="op">=</span> <span class="fu">customized_plots</span><span class="op">(</span><span class="va">or_plots</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># Plot all graphs in one matrix</span></span>
<span><span class="va">plot_grob</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/gridExtra/man/arrangeGrob.html" class="external-link">arrangeGrob</a></span><span class="op">(</span>grobs<span class="op">=</span><span class="va">plot_list</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/gridExtra/man/arrangeGrob.html" class="external-link">grid.arrange</a></span><span class="op">(</span><span class="va">plot_grob</span><span class="op">)</span></span></code></pre></div>
<p><img src="OddsRatioVisualizer_files/figure-html/unnamed-chunk-13-1.png" width="960"></p>
<p>A few observations from these plots are that the distribution of
Reading Scores is right-skewed, and that an increase in Reading Scores
results in a higher Odds Ratio, indicating a positive effect.
Additionally, the effect of the difference between the First Quartile
(Q1) and the Minimum Reading Scores shows a change of nearly 2 units in
the Odds Ratio, while the difference between the Third Quartile (Q3) and
the Minimum Reading Scores exhibits a change of approximately 3.75 units
in the Odds Ratio.</p>
<p>Conversely, Science Scores demonstrate a negative effect on Odds
Ratio values. A possible explanation for this observation is that
students with high Science Scores possess strong technical knowledge and
skills, which they further develop and apply in vocational programs
during high school.</p>
<p>Let’s take a look at Odds Ratio plots for GLM functions fitted for
<em>general</em> and <em>vocation</em> programs.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Select continuous variables</span></span>
<span><span class="va">continuous_vars</span> <span class="op">=</span> <span class="va">hsb_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select_all.html" class="external-link">select_if</a></span><span class="op">(</span><span class="va">is.numeric</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create a list to store all plots</span></span>
<span><span class="va">plot_list</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Define program names and target variable</span></span>
<span><span class="va">prog_names</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"academic"</span>, <span class="st">"general"</span>, <span class="st">"vocation"</span><span class="op">)</span></span>
<span><span class="va">var_name</span> <span class="op">=</span> <span class="st">"science"</span></span>
<span></span>
<span><span class="co"># Get Odds Ratio plots for Science variable for functions fitted for different programs </span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">name</span> <span class="kw">in</span> <span class="va">prog_names</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="co"># Fit a new GLM function for general and vocation programs</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="va">name</span> <span class="op">!=</span> <span class="st">"academic"</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">cur_glm_object</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/glm.html" class="external-link">glm</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/AsIs.html" class="external-link">I</a></span><span class="op">(</span><span class="va">prog</span> <span class="op">==</span> <span class="va">name</span><span class="op">)</span> <span class="op">~</span> <span class="va">gender</span> <span class="op">+</span> <span class="va">math</span> <span class="op">+</span> <span class="va">read</span> <span class="op">+</span> <span class="va">write</span> <span class="op">+</span> <span class="va">science</span> </span>
<span>                         <span class="op">+</span> <span class="va">socst</span> <span class="op">+</span> <span class="va">schtyp</span> <span class="op">+</span> <span class="va">ses</span> <span class="op">+</span> <span class="va">race</span>,</span>
<span>                         family<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/stats/family.html" class="external-link">binomial</a></span><span class="op">(</span>link<span class="op">=</span><span class="st">"logit"</span><span class="op">)</span>, </span>
<span>                         data<span class="op">=</span><span class="va">hsb_data</span><span class="op">)</span></span>
<span>    </span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>    <span class="va">cur_glm_object</span> <span class="op">=</span> <span class="va">glm_object</span></span>
<span>  <span class="op">}</span></span>
<span>  </span>
<span>  <span class="va">or_plots</span> <span class="op">=</span> <span class="fu"><a href="../reference/plot_OR.html">plot_OR</a></span><span class="op">(</span><span class="va">cur_glm_object</span>, <span class="va">hsb_data</span>, var_name<span class="op">=</span><span class="va">var_name</span>, </span>
<span>                     color_filling<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"#CC6666"</span>, <span class="st">"#9999CC"</span>,<span class="st">"#66CC99"</span>,<span class="st">"#FF6600"</span><span class="op">)</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="va">or_plots</span><span class="op">$</span><span class="st">"BarPlot"</span> <span class="op">=</span> <span class="va">or_plots</span><span class="op">$</span><span class="st">"BarPlot"</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ggtitle</a></span><span class="op">(</span><span class="va">name</span><span class="op">)</span></span>
<span>  <span class="va">plot_list</span><span class="op">[[</span><span class="va">name</span><span class="op">]</span><span class="op">]</span> <span class="op">=</span> <span class="fu">customized_plots</span><span class="op">(</span><span class="va">or_plots</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># Plot all graphs in one matrix</span></span>
<span><span class="va">plot_grob</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/gridExtra/man/arrangeGrob.html" class="external-link">arrangeGrob</a></span><span class="op">(</span>grobs<span class="op">=</span><span class="va">plot_list</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/gridExtra/man/arrangeGrob.html" class="external-link">grid.arrange</a></span><span class="op">(</span><span class="va">plot_grob</span><span class="op">)</span></span></code></pre></div>
<p><img src="OddsRatioVisualizer_files/figure-html/unnamed-chunk-14-1.png" width="960"></p>
<p>The plots above indicate that an increase in Science Scores
positively influences the selection of either <em>general</em> or
<em>vocational</em> programs. Notably, when examining the distribution
of Science Scores across different programs (as shown in the boxplot
below), it is evident that students opting for the <em>academic</em>
program possess higher Science Scores compared to those choosing
<em>general</em> or <em>vocational</em> programs. This observation
suggests that students with higher Science Scores may prefer
non-academic programs because their academic skills are already
well-developed, or they seek to acquire additional skills related to
science available through vocational or general programs.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Boxplot for Science Scores factorized by high school programs</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">hsb_data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">science</span>, y<span class="op">=</span><span class="va">prog</span>, fill<span class="op">=</span><span class="va">prog</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html" class="external-link">geom_boxplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>legend.position<span class="op">=</span><span class="st">"none"</span><span class="op">)</span></span></code></pre></div>
<p><img src="OddsRatioVisualizer_files/figure-html/unnamed-chunk-15-1.png" width="768"></p>
</div>
</div>
</div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Vadim Tyuryaev, Aleksandr Tsybakin, Jane Heffernan, Hanna Jankowski, Kevin McGregor.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
